
<!DOCTYPE html>
<html lang="en-us">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Source Themes Academic 4.3.1">

  

  
  
  
  
  
    
    
    
  
  

  <meta name="author" content="Michael DeCrescenzo">

  
  
  
    
  
  <meta name="description" content="A quick solution to an R upgrade headache">

  
  <link rel="alternate" hreflang="en-us" href="/post/package-reinstall/">

  


  

  
  
  
  <meta name="theme-color" content="#268bd2">
  

  
  
  
  
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css" integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.0/css/all.css" integrity="sha384-aOkxzJ5uQz7WBObEZcHvV5JvRW3TUc2rNPA7pe3AwnsUohiw1Vj2Rgx2KSOkF5+h" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.css" integrity="sha256-ygkqlh3CYSUri3LhQxzdcm0n1EQvH2Y+U5S2idbLtxs=" crossorigin="anonymous">

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/github.min.css" crossorigin="anonymous" title="hl-light">
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark" disabled>
        
      
    

    

    

  

  
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Serif+Pro:400,700|Source+Sans+Pro:600|Roboto+Mono&display=swap">
  

  
  
  
  <link rel="stylesheet" href="/css/academic.min.50b9f726c440f0be8872e8a5472c6001.css">

  

  
  
  

  

  <link rel="manifest" href="/site.webmanifest">
  <link rel="icon" type="image/png" href="/img/icon.png">
  <link rel="apple-touch-icon" type="image/png" href="/img/icon-192.png">

  <link rel="canonical" href="/post/package-reinstall/">

  
  
  
  
    
  
  <meta property="twitter:card" content="summary_large_image">
  
  <meta property="twitter:site" content="@mikedecr">
  <meta property="twitter:creator" content="@mikedecr">
  
  <meta property="og:site_name" content="Michael DeCrescenzo">
  <meta property="og:url" content="/post/package-reinstall/">
  <meta property="og:title" content="How do I reinstall my packages for R 4.0 when many of them came from Github? | Michael DeCrescenzo">
  <meta property="og:description" content="A quick solution to an R upgrade headache"><meta property="og:image" content="/img/circular-telles.png">
  <meta property="twitter:image" content="/img/circular-telles.png"><meta property="og:locale" content="en-us">
  
  <meta property="article:published_time" content="2020-04-26T00:00:00&#43;00:00">
  
  <meta property="article:modified_time" content="2020-04-26T00:00:00&#43;00:00">
  

  


  





  <title>How do I reinstall my packages for R 4.0 when many of them came from Github? | Michael DeCrescenzo</title>

</head>


<body id="top" data-spy="scroll" data-target="#TableOfContents" data-offset="71" >

  <aside class="search-results" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="Search..." autocapitalize="off"
        autocomplete="off" autocorrect="off" role="textbox" spellcheck="false" type="search">
        
      </div>

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>


  
<nav class="navbar navbar-light fixed-top navbar-expand-lg py-0" id="navbar-main">
  <div class="container">

    
      <a class="navbar-brand" href="/"><img src="/img/circular-telles.png" alt="Michael DeCrescenzo"></a>
      
      <button type="button" class="navbar-toggler" data-toggle="collapse"
              data-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
        <span><i class="fas fa-bars"></i></span>
      </button>
      

    
    <div class="collapse navbar-collapse" id="navbar">

      
      
      <ul class="navbar-nav ml-auto">
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/about"><span>About</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link  active" href="/post"><span>Blog</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#publications"><span>Publications</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#research"><span>Research</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/teaching"><span>Teaching</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/code"><span>Code Projects</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#contact"><span>Contact</span></a>
        </li>

        
        

      

        

        
        <li class="nav-item">
          <a class="nav-link js-search" href="#"><i class="fas fa-search" aria-hidden="true"></i></a>
        </li>
        

        

        
        <li class="nav-item">
          <a class="nav-link js-dark-toggle" href="#"><i class="fas fa-moon" aria-hidden="true"></i></a>
        </li>
        

      </ul>

    </div>
  </div>
</nav>


  <article class="article" itemscope itemtype="http://schema.org/Article">

  












  

  
  
  
<div class="article-container pt-3">
  <h1 itemprop="name">How do I reinstall my packages for R 4.0 when many of them came from Github?</h1>

  
  <p class="page-subtitle">A quick solution to an R upgrade headache</p>
  

  
    



<meta content="2020-04-26 00:00:00 &#43;0000 UTC" itemprop="datePublished">
<meta content="2020-04-26 00:00:00 &#43;0000 UTC" itemprop="dateModified">

<div class="article-metadata">

  
  
  
  
  <div>
    



  <span itemprop="author name" itemtype="http://schema.org/Person"><a href="/authors/admin/">Michael DeCrescenzo</a></span>

  </div>
  
  

  
  <span class="article-date">
    
    
      
    
    <time>2020-04-26</time>
  </span>
  

  

  
  <span class="middot-divider"></span>
  <span class="article-reading-time">
    10 min read
  </span>
  

  
  

  
  
  <span class="middot-divider"></span>
  <span class="article-categories">
    <i class="fas fa-folder"></i>
    <a href="/categories/methods/">Methods</a></span>
  

  
    

  

</div>

    














  
</div>



  <div class="article-container">

    <div class="article-style" itemprop="articleBody">
      


<div id="motivation" class="section level1">
<h1>Motivation</h1>
<p>R 4.0 <a href="https://cran.r-project.org/">is here</a>, and that’s great. Be warned that if you install it, you will lose all of your installed packages. How should you reinstall them?</p>
<p><strong>First,</strong> there’s something to be said for installing as you go rather than inheriting all of your packages from your past self. A major upgrade can be a good excuse to clean house, trim unnecessary stuff from your computer, and <a href="https://twitter.com/hadleywickham/status/1254387031842701312">install packages from scratch</a>. As much as I like to take this approach myself, I have to teach next week, so I want my R environment established quickly.<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a></p>
<p>If you don’t particularly want to install-as-you-go, one way to revitalize your R environment is to <em>record which packages you have installed</em> and automate their re-installation with some code. You can find several helpful online guides that <a href="https://rstats.wtf/maintaining-r.html#how-to-transfer-your-library-when-updating-r">walk through the main idea</a>: save the names of installed packages as a vector, and then pass these names to <code>install.packages()</code> to do a batch installation from CRAN.</p>
<p><strong>But what about the packages that don’t live on CRAN?</strong> My experiments with R have led me to install several packages from Github: maybe they were “development versions” that had yet to be published on CRAN, or they will never be on CRAN due to policy incompatibilities or the wishes of the package developer. (See Reason #5 in <a href="https://twitter.com/hadleywickham/status/1254421747014737920">this tweet</a>.) How can we automate the reinstall process when these packages have different online sources? This post walks through a process for doing that, adapted from this <a href="https://gist.github.com/mikedecr/6fd2e7855c71e4358534d5af3b72a03d">Gist</a> that I <a href="https://twitter.com/mikedecr/status/1254152352241782787">shared on Twitter</a>. I adapted the whole thing to go into a little <a href="https://github.com/mikedecr/update-R">Github repository</a> if you’d like to fork/clone that instead.</p>
</div>
<div id="roadmap" class="section level1">
<h1>Roadmap</h1>
<p>The routine has the following main ideas.</p>
<ol style="list-style-type: decimal">
<li>What packages have I installed, and where did they come from?</li>
<li>Check my local package versions against the CRAN versions. Are the most recent versions on CRAN, or was I using a Github version that I should keep using?</li>
<li>Render unto Caesar: install the packages from CRAN that makes sense to get from CRAN, but install the packages from Github that makes sense to get from Github.</li>
</ol>
</div>
<div id="what-is-already-installed" class="section level1">
<h1>What is already installed?</h1>
<p>First we collect information on the packages we already have installed. I am working out of a project directory that manages all of my R updating business, so I <a href="https://rstats.wtf/safe-paths.html">use the <code>{here}</code> package</a> consistent with a <a href="https://rstats.wtf/project-oriented-workflow.html">project-oriented R workflow</a>. We will also use tidyverse-style data manipulation.</p>
<pre class="r"><code>library(&quot;here&quot;)
library(&quot;tidyverse&quot;)
## Warning: package &#39;tibble&#39; was built under R version 4.0.2</code></pre>
<p>The <code>installed.packages()</code> function returns a table of package information for all packages in your library. I convert this to a tibble to make things easier.</p>
<pre class="r"><code># data frame of all installed packages
local_pkgs &lt;- installed.packages() %&gt;%
  as_tibble() %&gt;%
  print()
## # A tibble: 392 x 16
##    Package LibPath Version Priority Depends Imports LinkingTo Suggests Enhances
##    &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;    &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;   
##  1 abind   /Libra… 1.4-5   &lt;NA&gt;     &quot;R (&gt;=… method… &lt;NA&gt;       &lt;NA&gt;    &lt;NA&gt;    
##  2 adagio  /Libra… 0.7.1   &lt;NA&gt;     &quot;R (&gt;=… graphi… &lt;NA&gt;       &lt;NA&gt;    &lt;NA&gt;    
##  3 ade4    /Libra… 1.7-15  &lt;NA&gt;     &quot;R (&gt;=… graphi… &lt;NA&gt;      &quot;ade4Tk… &lt;NA&gt;    
##  4 AER     /Libra… 1.2-9   &lt;NA&gt;     &quot;R (&gt;=… stats,… &lt;NA&gt;      &quot;boot, … &lt;NA&gt;    
##  5 Amelia  /Libra… 1.7.6   &lt;NA&gt;     &quot;R (&gt;=… foreig… Rcpp (&gt;=… &quot;tcltk,… &lt;NA&gt;    
##  6 arrayh… /Libra… 1.1-0   &lt;NA&gt;      &lt;NA&gt;   method… &lt;NA&gt;       &lt;NA&gt;    &lt;NA&gt;    
##  7 askpass /Libra… 1.1     &lt;NA&gt;      &lt;NA&gt;   sys (&gt;… &lt;NA&gt;      &quot;testth… &lt;NA&gt;    
##  8 assert… /Libra… 0.2.1   &lt;NA&gt;      &lt;NA&gt;   tools   &lt;NA&gt;      &quot;testth… &lt;NA&gt;    
##  9 audio   /Libra… 0.1-7   &lt;NA&gt;     &quot;R (&gt;=… &lt;NA&gt;    &lt;NA&gt;       &lt;NA&gt;    &lt;NA&gt;    
## 10 backpo… /Libra… 1.1.7   &lt;NA&gt;     &quot;R (&gt;=… utils   &lt;NA&gt;       &lt;NA&gt;    &lt;NA&gt;    
## # … with 382 more rows, and 7 more variables: License &lt;chr&gt;,
## #   License_is_FOSS &lt;chr&gt;, License_restricts_use &lt;chr&gt;, OS_type &lt;chr&gt;,
## #   MD5sum &lt;chr&gt;, NeedsCompilation &lt;chr&gt;, Built &lt;chr&gt;</code></pre>
<p>This is a start, but I also want to know if I got these packages from CRAN or from Github. I can do this with <code>sessioninfo::package_info()</code>, passing a vector of package names to the function.</p>
<pre class="r"><code># get source details (cran, github...) from package_info()
local_details &lt;- 
  sessioninfo::package_info(pkgs = local_pkgs$Package) %&gt;%
  as_tibble() %&gt;%
  select(package, local_version = ondiskversion, source) %&gt;%
  print()
## # A tibble: 378 x 3
##    package      local_version source        
##    &lt;chr&gt;        &lt;chr&gt;         &lt;chr&gt;         
##  1 abind        1.4-5         CRAN (R 4.0.0)
##  2 adagio       0.7.1         CRAN (R 4.0.0)
##  3 ade4         1.7-15        CRAN (R 4.0.0)
##  4 AER          1.2-9         CRAN (R 4.0.0)
##  5 Amelia       1.7.6         CRAN (R 4.0.0)
##  6 arrayhelpers 1.1-0         CRAN (R 4.0.0)
##  7 askpass      1.1           CRAN (R 4.0.0)
##  8 assertthat   0.2.1         CRAN (R 4.0.0)
##  9 audio        0.1-7         CRAN (R 4.0.0)
## 10 backports    1.1.7         CRAN (R 4.0.0)
## # … with 368 more rows</code></pre>
<p>Notice that this new table has 14 fewer rows. That’s because <code>sessioninfo::package_info()</code> isn’t returning the base packages that show up in <code>installed.packages()</code>. That’s fine, since those will come with R 4.0 anyway.</p>
<p>The <code>source</code> column in this new table shows us what we want to know. For instance, let’s look at packages that I have from Github.</p>
<pre class="r"><code>filter(local_details, str_detect(source, &quot;Github&quot;))
## # A tibble: 8 x 3
##   package       local_version source                                   
##   &lt;chr&gt;         &lt;chr&gt;         &lt;chr&gt;                                    
## 1 colorout      1.2-2         Github (jalvesaq/colorout@726d681)       
## 2 emo           0.0.0.9000    Github (hadley/emo@3f03b11)              
## 3 ggkeyboard    0.0.0.9009    Github (sharlagelfand/ggkeyboard@b1a965d)
## 4 mRkov         0.0.0.9000    Github (serrat839/mRkov@0f520e8)         
## 5 rethinking    2.00          Github (rmcelreath/rethinking@f393f30)   
## 6 Statamarkdown 0.4.5         Github (hemken/Statamarkdown@506cfc9)    
## 7 texreg        1.36.28       Github (leifeld/texreg@c1da5c8)          
## 8 waffle        1.0.1         Github (hrbrmstr/waffle@3f61463)</code></pre>
</div>
<div id="determining-install-source-by-comparing-package-versions" class="section level1">
<h1>Determining install source by comparing package versions</h1>
<p>Before you update R, you may be using packages installed from Github, even if those packages are also on CRAN. We want to compare our locally installed package versions against the versions on CRAN. If the CRAN versions are more recent, we can go ahead and get those packages from CRAN. If the Github versions are still the most recent (or the <em>only</em>) versions of some packages, we want to get them from Github.</p>
<p>We will want to get a table of data on CRAN package versions. The <code>available.packages()</code> function returns info for <strong>all</strong> packages on CRAN.</p>
<pre class="r"><code># available.packages() returns pkg info for ALL pkgs on CRAN.
cran_pkgs &lt;- available.packages() %&gt;% 
  as_tibble(.name_repair = tolower) %&gt;%
  print()
## # A tibble: 16,578 x 17
##    package version priority depends imports linkingto suggests enhances license
##    &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;    &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt;  
##  1 A3      1.0.0   &lt;NA&gt;     R (&gt;= …  &lt;NA&gt;   &lt;NA&gt;      randomF… &lt;NA&gt;     GPL (&gt;…
##  2 aaSEA   1.1.0   &lt;NA&gt;     R(&gt;= 3… &quot;DT(&gt;=… &lt;NA&gt;      knitr, … &lt;NA&gt;     GPL-3  
##  3 AATtoo… 0.0.1   &lt;NA&gt;     R (&gt;= … &quot;magri… &lt;NA&gt;      &lt;NA&gt;     &lt;NA&gt;     GPL-3  
##  4 ABACUS  1.0.0   &lt;NA&gt;     R (&gt;= … &quot;ggplo… &lt;NA&gt;      rmarkdo… &lt;NA&gt;     GPL-3  
##  5 abbyyR  0.5.5   &lt;NA&gt;     R (&gt;= … &quot;httr,… &lt;NA&gt;      testtha… &lt;NA&gt;     MIT + …
##  6 abc     2.1     &lt;NA&gt;     R (&gt;= …  &lt;NA&gt;   &lt;NA&gt;      &lt;NA&gt;     &lt;NA&gt;     GPL (&gt;…
##  7 abc.da… 1.0     &lt;NA&gt;     R (&gt;= …  &lt;NA&gt;   &lt;NA&gt;      &lt;NA&gt;     &lt;NA&gt;     GPL (&gt;…
##  8 ABC.RAP 0.9.0   &lt;NA&gt;     R (&gt;= … &quot;graph… &lt;NA&gt;      knitr, … &lt;NA&gt;     GPL-3  
##  9 abcADM  1.0     &lt;NA&gt;     &lt;NA&gt;    &quot;Rcpp … Rcpp, BH  &lt;NA&gt;     &lt;NA&gt;     GPL-3  
## 10 ABCana… 1.2.1   &lt;NA&gt;     R (&gt;= … &quot;plotr… &lt;NA&gt;      &lt;NA&gt;     &lt;NA&gt;     GPL-3  
## # … with 16,568 more rows, and 8 more variables: license_is_foss &lt;chr&gt;,
## #   license_restricts_use &lt;chr&gt;, os_type &lt;chr&gt;, archs &lt;chr&gt;, md5sum &lt;chr&gt;,
## #   needscompilation &lt;chr&gt;, file &lt;chr&gt;, repository &lt;chr&gt;</code></pre>
<p>We only care about the packages in this table that we have already installed, so we will narrow the table down using a join.</p>
<pre class="r"><code>slimmer_frame &lt;- 
  left_join(
    x = select(local_details, package, local_version, source),
    y = select(cran_pkgs, package, cran_version = version)
  ) %&gt;%
  print()
## # A tibble: 378 x 4
##    package      local_version source         cran_version
##    &lt;chr&gt;        &lt;chr&gt;         &lt;chr&gt;          &lt;chr&gt;       
##  1 abind        1.4-5         CRAN (R 4.0.0) 1.4-5       
##  2 adagio       0.7.1         CRAN (R 4.0.0) 0.7.1       
##  3 ade4         1.7-15        CRAN (R 4.0.0) 1.7-16      
##  4 AER          1.2-9         CRAN (R 4.0.0) 1.2-9       
##  5 Amelia       1.7.6         CRAN (R 4.0.0) 1.7.6       
##  6 arrayhelpers 1.1-0         CRAN (R 4.0.0) 1.1-0       
##  7 askpass      1.1           CRAN (R 4.0.0) 1.1         
##  8 assertthat   0.2.1         CRAN (R 4.0.0) 0.2.1       
##  9 audio        0.1-7         CRAN (R 4.0.0) 0.1-7       
## 10 backports    1.1.7         CRAN (R 4.0.0) 1.2.0       
## # … with 368 more rows</code></pre>
<p>Using this slimmer table, we categorize the sources of these packages and where we want to reinstall them from. Here is the basic idea: <strong>We want to install from Github only if our local Github version is more recent than the CRAN version.</strong> This also applies when there is no version of a package on CRAN.</p>
<p>Stated another way, we install a package from CRAN in any case that the CRAN version is more recent than the local version. This is true even if the local version was installed from Github! Remember, we don’t install from Github simply because we did so in the past. We install from Github if there is no better choice.</p>
<p>There are edge cases to be aware of: we may find that the CRAN version of a package is behind our local version, <em>even if</em> the local version was installed from CRAN. This happens for (at least) two reasons: if a package version was reverted on CRAN (which appeared to happen in the case of <a href="https://github.com/cran/StanHeaders/commit/2294a66cb1876568b6af74a6c4a1233bf6b6e00f">StanHeaders</a>), or if the package is currently unavailable for installation from CRAN (due to some incompatibility, perhaps).</p>
<p>The code below does this categorization using the <code>utils::compareVersion()</code> function, which interprets the version numbers so we don’t have to. We do an additional step to note the Github repostory for any package that we still want to obtain from Github.</p>
<pre class="r"><code>compare_frame &lt;- slimmer_frame %&gt;%
  group_by(package) %&gt;% 
  mutate(
    source_locale = case_when(
      compareVersion(local_version, cran_version) == 1 &amp;
        str_detect(source, &quot;Github&quot;) ~ &quot;Github&quot;,
      compareVersion(local_version, cran_version) == 1 &amp;
        is.na(cran_version) &amp;
        str_detect(source, &quot;CRAN&quot;) ~ &quot;Unavailable on CRAN&quot;,
      compareVersion(local_version, cran_version) == 1 &amp;
        (is.na(cran_version) == FALSE) &amp;
        str_detect(source, &quot;CRAN&quot;) ~ &quot;Downgraded on CRAN&quot;,
      compareVersion(local_version, cran_version) %in% c(-1, 0) ~ &quot;CRAN&quot;
    ),
    github_repo = case_when(
      source_locale == &quot;Github&quot; ~ 
        str_split(string = source, pattern = &quot;@&quot;, simplify = TRUE)[,1] %&gt;%
        str_replace(&quot;Github \\(&quot;, &quot;&quot;),
      TRUE ~ as.character(NA)
    ),
  ) %&gt;%
  ungroup() %&gt;%
  print()
## # A tibble: 378 x 6
##    package     local_version source       cran_version source_locale github_repo
##    &lt;chr&gt;       &lt;chr&gt;         &lt;chr&gt;        &lt;chr&gt;        &lt;chr&gt;         &lt;chr&gt;      
##  1 abind       1.4-5         CRAN (R 4.0… 1.4-5        CRAN          &lt;NA&gt;       
##  2 adagio      0.7.1         CRAN (R 4.0… 0.7.1        CRAN          &lt;NA&gt;       
##  3 ade4        1.7-15        CRAN (R 4.0… 1.7-16       CRAN          &lt;NA&gt;       
##  4 AER         1.2-9         CRAN (R 4.0… 1.2-9        CRAN          &lt;NA&gt;       
##  5 Amelia      1.7.6         CRAN (R 4.0… 1.7.6        CRAN          &lt;NA&gt;       
##  6 arrayhelpe… 1.1-0         CRAN (R 4.0… 1.1-0        CRAN          &lt;NA&gt;       
##  7 askpass     1.1           CRAN (R 4.0… 1.1          CRAN          &lt;NA&gt;       
##  8 assertthat  0.2.1         CRAN (R 4.0… 0.2.1        CRAN          &lt;NA&gt;       
##  9 audio       0.1-7         CRAN (R 4.0… 0.1-7        CRAN          &lt;NA&gt;       
## 10 backports   1.1.7         CRAN (R 4.0… 1.2.0        CRAN          &lt;NA&gt;       
## # … with 368 more rows</code></pre>
</div>
<div id="updating-r-and-reinstalling-packages" class="section level1">
<h1>Updating R and reinstalling packages</h1>
<p>When we are satisfied with our decisions about where to install a package from, save this comparison table to file.</p>
<pre class="r"><code># output data location
dir.create(here(&quot;data&quot;))

# output file
out_file &lt;- as.character(str_glue(&quot;pkg-data_{Sys.Date()}.rds&quot;))
write_rds(compare_frame, here(&quot;data&quot;, out_file))</code></pre>
<p>After updating, we reopen R and install our packages according to our classifications. We want to begin by installing <code>{remotes}</code> to enable installation from Github.</p>
<pre class="r"><code># to install from github
install.packages(&quot;remotes&quot;)

# should still be operating in your working directory
# so downloading {here} makes sense also
install.packages(&quot;here&quot;)

# read package data
pkgs &lt;- readRDS(here::here(&quot;data&quot;, &quot;pkg-data_2020-04-25.rds&quot;))</code></pre>
<p>Everything that we want to install from Github, we install by iterating <code>remotes::install_github</code> over the github repository slugs that we saved previously. This requires us to write the code in “hard mode” because we aren’t using tidyverse dialect.</p>
<pre class="r"><code># install from github repos
github_pkgs &lt;- pkgs[pkgs$source_locale == &quot;Github&quot;, ][[&quot;github_repo&quot;]]

remotes::install_github(github_pkgs)</code></pre>
<p>Finally, everything that we said we wouldn’t get from Github, we get by using plain ol’ <code>install.packages()</code>. Before doing this, you may find it beneficial to filter out some of the packages that you don’t use anymore or that maybe we only installed as dependencies for other packages.</p>
<pre class="r"><code># install from cran with remaining package names
cran_pkgs &lt;- pkgs[pkgs$source_locale != &quot;Github&quot;, ][[&quot;package&quot;]]

install.packages(cran_pkgs)</code></pre>
<p>This should get you (more or less) up and running with R 4.0 and all of your old packages.</p>
<p>Fair warning: I’m already getting burned by some C++ configuration problems for packages that want to compile from source. I think this is particular to my own computer and the klugey fixes I undertook to set up <code>{rstan}</code> with MacOS Catalina. I remember reading somewhere that R 4.0 fixed some of the Stan x Catalina problems, so maybe I will confront these choices again soon, but I will cross that bridge when I get to it.</p>
</div>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p>
And maybe I will do a fresh install of <em>everything</em> once the semester is over.<a href="#fnref1" class="footnote-back">↩</a></p></li>
</ol>
</div>

    </div>

    

<div class="article-tags">
  
  <a class="badge badge-light" href="/tags/methods/">Methods</a>
  
  <a class="badge badge-light" href="/tags/computational-methods/">Computational Methods</a>
  
  <a class="badge badge-light" href="/tags/r/">R</a>
  
</div>



    
      








  
  
    
  
  





  
  
  
    
  
  
  <div class="media author-card" itemscope itemtype="http://schema.org/Person">
    
      
      <img class="portrait mr-3" src="/authors/admin/avatar-grace_hu05a9fa9b849008cfd0c58ea39efc7f26_83291_250x250_fill_q90_lanczos_center.jpg" itemprop="image" alt="Avatar">
    

    <div class="media-body">
      <h5 class="card-title" itemprop="name"><a href="/">Michael DeCrescenzo</a></h5>
      <h6 class="card-subtitle">Quantitative Researcher</h6>
      <p class="card-text" itemprop="description">U.S. Electoral Politics, Bayesian Analysis, Open Source Research</p>
      <ul class="network-icon" aria-hidden="true">
        
          
          
          
            
          
          
          
          
          
            
          
          <li>
            <a itemprop="sameAs" href="/#contact" >
              <i class="fas fa-paper-plane"></i>
            </a>
          </li>
        
          
          
          
            
          
          
          
          
          
            
          
          <li>
            <a itemprop="sameAs" href="https://github.com/mikedecr" target="_blank" rel="noopener">
              <i class="fab fa-github"></i>
            </a>
          </li>
        
          
          
          
            
          
          
          
          
          
            
          
          <li>
            <a itemprop="sameAs" href="https://twitter.com/mikedecr" target="_blank" rel="noopener">
              <i class="fab fa-twitter"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>



      
      
      <div class="article-widget">
        <div class="hr-light"></div>
        <h3>Related</h3>
        <ul>
          
          <li><a href="/post/visualizing-what-matters/">Plotting What Matters</a></li>
          
          <li><a href="/post/git-in-papers/">Git information in your open-source research paper (with Rmarkdown)
</a></li>
          
          <li><a href="/teaching/causal-inf-2019/">Causal Inference Reading Group
</a></li>
          
          <li><a href="/teaching/numbers/">PS 270: Understanding Political Numbers
</a></li>
          
          <li><a href="/teaching/computing-811/">PS 811: Introductory Statistical Computing for Political Science
</a></li>
          
        </ul>
      </div>
      
    

    

    


  </div>
</article>

      

    
    
    
    <script src="/js/mathjax-config.js"></script>
    

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.js" integrity="sha256-X5PoE3KU5l+JcX+w09p/wHl9AzK333C4hJ2I9S5mD4M=" crossorigin="anonymous"></script>

      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js" integrity="sha256-aYTdUrn6Ow1DDgh5JTc3aDGnnju48y/1c8s1dgkYPQ8=" crossorigin="anonymous"></script>
        
        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/languages/r.min.js"></script>
        
        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/languages/tex.min.js"></script>
        
        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/languages/bib.min.js"></script>
        
        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/languages/txt.min.js"></script>
        
      

      
      
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS_CHTML-full" integrity="sha256-GhM+5JHb6QUzOQPXSJLEWP7R73CbkisjzK5Eyij4U9w=" crossorigin="anonymous" async></script>
      
    

    
    

    
    
    

    
    
    <script>hljs.initHighlightingOnLoad();</script>
    

    
    
    <script>
      const search_index_filename = "/index.json";
      const i18n = {
        'placeholder': "Search...",
        'results': "results found",
        'no_results': "No results found"
      };
      const content_type = {
        'post': "Posts",
        'project': "Projects",
        'publication' : "Publications",
        'talk' : "Talks"
        };
    </script>
    

    
    

    
    
    <script id="search-hit-fuse-template" type="text/x-template">
      <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
      </div>
    </script>
    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>
    

    
    

    
    
    
    
    
    
    
    
    
      
    
    
    
    
    <script src="/js/academic.min.23e2fabfaf271b1b075bb9e0280085b7.js"></script>

    






  
  <div class="container">
    <footer class="site-footer">
  

  <p class="powered-by">
    © Michael DeCrescenzo 2020 &middot; 

    Powered by the
    <a href="https://sourcethemes.com/academic/" target="_blank" rel="noopener">Academic theme</a> for
    <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a>.

    
    <span class="float-right" aria-hidden="true">
      <a href="#" id="back_to_top">
        <span class="button_icon">
          <i class="fas fa-chevron-up fa-2x"></i>
        </span>
      </a>
    </span>
    
  </p>
</footer>

  </div>
  

  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>
  
  
<script type="text/javascript">
var sc_project=11382424; 
var sc_invisible=1; 
var sc_security="647b3843"; 
</script>
<script type="text/javascript"
src="https://www.statcounter.com/counter/counter.js"
async></script>
<noscript><div class="statcounter"><a title="free hit
counter" href="https://statcounter.com/"
target="_blank"><img class="statcounter"
src="https://c.statcounter.com/11382424/0/647b3843/1/"
alt="free hit counter"></a></div></noscript>


</body>
</html>
